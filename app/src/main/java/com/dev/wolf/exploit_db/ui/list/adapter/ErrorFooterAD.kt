package com.dev.wolf.exploit_db.ui.list.adapter

import com.dev.wolf.exploit_db.databinding.ItemErrorFooterBinding
import com.dev.wolf.exploit_db.ui.list.model.ErrorFooter
import com.dev.wolf.exploit_db.ui.list.model.ListModel
import com.dev.wolf.exploit_db.utils.ext.getDisplayMessage
import com.hannesdorfmann.adapterdelegates4.dsl.adapterDelegateViewBinding

fun errorFooterAD(
    onRetryClick: (Throwable) -> Unit
) = adapterDelegateViewBinding<ErrorFooter, ListModel, ItemErrorFooterBinding>(
    { inflater, parent -> ItemErrorFooterBinding.inflate(inflater, parent, false) }
) {

    binding.root.setOnClickListener {
        onRetryClick(item.exception)
    }

    bind {
        binding.textViewTitle.text = item.exception.getDisplayMessage(context.resources)
        binding.imageViewIcon.setImageResource(item.icon)
    }
}