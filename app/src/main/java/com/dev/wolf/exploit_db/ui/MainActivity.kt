package com.dev.wolf.exploit_db.ui

import android.os.Bundle
import android.view.ViewGroup
import androidx.core.graphics.Insets
import androidx.core.view.updateLayoutParams
import androidx.fragment.app.Fragment
import com.dev.wolf.exploit_db.R
import com.dev.wolf.exploit_db.base.BaseActivity
import com.dev.wolf.exploit_db.databinding.ActivityMainBinding
import com.dev.wolf.exploit_db.ui.list.fragment.RemoteListFragment
import com.dev.wolf.exploit_db.utils.ext.resolveDp

class MainActivity : BaseActivity<ActivityMainBinding>() {


    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(ActivityMainBinding.inflate(layoutInflater))

        supportActionBar?.setDisplayHomeAsUpEnabled(true)
        setPrimaryFragment(RemoteListFragment.newInstance())
    }

    override fun onWindowInsetsChanged(insets: Insets) {
        binding.toolbarCard.updateLayoutParams<ViewGroup.MarginLayoutParams> {
            topMargin = insets.top + resources.resolveDp(8)
            leftMargin = insets.left + resources.resolveDp(16)
            rightMargin = insets.right + resources.resolveDp(16)
        }
    }

    private fun setPrimaryFragment(fragment: Fragment) {
        supportFragmentManager.beginTransaction()
            .replace(R.id.container, fragment, TAG_PRIMARY)
            .commit()
    }

    private companion object {
        const val TAG_PRIMARY = "primary"
        const val TAG_SEARCH = "search"
    }
}