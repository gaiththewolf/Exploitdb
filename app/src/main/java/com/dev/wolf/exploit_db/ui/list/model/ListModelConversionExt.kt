package com.dev.wolf.exploit_db.ui.list.model

import com.dev.wolf.exploit_db.R
import com.dev.wolf.exploit_db.core.model.Exploit
import com.dev.wolf.exploit_db.utils.ext.format


fun Exploit.toListModel() = ExploitListModel(
    id = id,
    title = title,
    isVerified = isVerified,
    date = createdAt.format("dd-MM-yyyy").orEmpty(),
    isApplication = isApplication.first,
    type = type?.title.orEmpty(),
    platform = platform?.title.orEmpty(),
    author = author.orEmpty(),
    exploit = this
)

fun List<Exploit>.toUi(): List<ListModel> = map(Exploit::toListModel)

fun <C : MutableCollection<ListModel>> List<Exploit>.toUi(destination: C): C = mapTo(destination, Exploit::toListModel)

fun Throwable.toErrorState(canRetry: Boolean = true) = ErrorState(
    exception = this,
    icon = R.drawable.ic_error,
    canRetry = canRetry,
    buttonText = R.string.try_again
)

fun Throwable.toErrorFooter() = ErrorFooter(
    exception = this,
    icon = R.drawable.ic_error
)
