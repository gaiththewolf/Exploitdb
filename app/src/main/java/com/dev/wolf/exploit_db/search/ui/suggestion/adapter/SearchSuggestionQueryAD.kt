package com.dev.wolf.exploit_db.search.ui.suggestion.adapter

import android.view.View
import com.dev.wolf.exploit_db.R
import com.dev.wolf.exploit_db.databinding.ItemSearchSuggestionQueryBinding
import com.dev.wolf.exploit_db.search.ui.suggestion.SearchSuggestionItem
import com.dev.wolf.exploit_db.search.ui.suggestion.SearchSuggestionListener
import com.hannesdorfmann.adapterdelegates4.dsl.adapterDelegateViewBinding

fun searchSuggestionQueryAD(
    listener: SearchSuggestionListener,
) = adapterDelegateViewBinding<SearchSuggestionItem.RecentQuery, SearchSuggestionItem, ItemSearchSuggestionQueryBinding>(
    { inflater, parent -> ItemSearchSuggestionQueryBinding.inflate(inflater, parent, false) }
) {

    val viewClickListener = View.OnClickListener { v ->
        listener.onQueryClick(item.query, v.id != R.id.button_complete)
    }

    binding.root.setOnClickListener(viewClickListener)
    binding.buttonComplete.setOnClickListener(viewClickListener)

    bind {
        binding.textViewTitle.text = item.query
    }
}